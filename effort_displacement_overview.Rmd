---
title: "Effort Displacement Overview"
author: 
  - Min-Yang Lee^[NEFSC, Min-Yang.Lee@noaa.gov]
  - Greg Ardini^[NEFSC, Gregory.Ardini@noaa.gov]
  - Marina Chaji^[NEFSC, Marina.Chaji@noaa.gov]
  - Melanie Harsch^[AFSC Melanie.Harsch@noaa.gov]
  - Alan Haynie^[AFSC, Alan.Haynie@noaa.gov]
  - Bryce McManus^[AFSC, Bryce.McManus@noaa.gov]
  - Tammy Murphy^[NEFSC, Tammy.Murphy@noaa.gov]
  - Lisa Pfeiffer^[NWFSC, Lisa.Pfeiffer@noaa.gov]
  - Eric Thunberg^[NMFS OS&T, Eric.Thunberg@noaa.gov]

date: "`r format(Sys.time(), '%B %d, %Y, %H:%M')`"
output:
  pdf_document: default
  html_document:
    number_sections: yes
---




```{r setup, include=TRUE, echo=FALSE, results='hide', message=F, warning=F}
# Project setup
# Load packages. Install if necessary.

# Set Path
here::i_am("effort_displacement_overview.Rmd")

# Load packages. I have purposefully loaded only a 'skinny' selection of packages.  
PKG <- c("here","leaflet", "tidyverse", "sf", "dbplyr")

for (p in PKG) {
  if(!require(p,character.only = TRUE)) {
    install.packages(p)
    require(p,character.only = TRUE)}
}

# Set or reset the data vintage string
# You might need to manually set the vintage_string
vintage_string<-Sys.Date()
vintage_string<-gsub("-","_",vintage_string)
vintage_string<-"2022_02_16"

#####################################################################################################
#
# If we are going to use "the data" (generated by data_extraction_and_processing_code.Rmd) to do anything, we should # NOT be extracting any data here.  If we need to make summary statistics or images, they should be constructed from # the output of "data_extraction_and_processing_code.Rmd"
# 
# Anyone who has put the output of the data processing code in their data/main folder should be able to build this 
# document. 
#####################################################################################################
# Load in the data.  
final_product_savename<-paste0("final_product_lease",vintage_string,".Rds")
final_product_lease<-readRDS(here("data","main",final_product_savename))
```



# Research Question and Motivation

## Plain English

How will wind energy development affect the Limited Access Scallop Fishery?  Where will firms choose to fish when areas are closed?  Will firms fish less? How much worse off with firms be?

## Economic Jargon

What are the annual changes in profits (or producer surplus) when a single wind area is closed? When many are closed?  If all are closed?  

# Empirical Setting

## Scallop Fishery

We are modeling the location choices of fishing vessels in the Limited Access Days-at-Sea scallop fishery. There are approximately 300-330 of these fishing vessels.  They are allocated "Open Area Days-at-Sea" and a quantity of trips and/or pounds into the "Access Areas."  They catch approximately 95% of the scallops.  The Limited Access DAS fleet can be further subdivided into Full-Time, Part-Time, and Occasional Fleets.  Vessels primarily use the New Bedford scallop dredge, but a few use a smaller dredge or a bottom trawl.  Over the 13 years in our dataset, there are approximately 40,000 trips taken by this fleet, split roughly evenly into "Open areas" and "Access Areas."

For Fishing Year 2016 and earlier, the fishing year Ran from March 1 to Feb 28/29. For fishing year 2017, the year ran from March 1 to March 31.  For 2018 and later, the fishing year runs from April 1 to March 31.

## Wind Energy

Here is a short description of the wind energy areas, how large they are,  and how they will close (or not close) area to fishing.  18 wind areas currently under dev.  But many more are likely.

How close will fishing be able to occur within Wind Lease Areas / Turbines?  

The wind energy areas do not match the ten minute squares; we are currently planning on simulating the effects of closing a wind energy area by closing an entire ten minute square that is inside or touching a WEA.  

The buried cable route from a WEA to shore is likely to be closed as well.  Cable buried at shallow depths and marked with concrete.

# Data

There are four main data sources (so far).  None are perfect.

We have decided to use the DMIS as our primary dataset. DMIS primarily uses Vessel Trip Reports (VTRs) for "trip" and "effort" data and dealer databases for landings. A drawback of using these data are that there is a single point (latitude and longitude) for each time a vessel deploys a particular type of gear into a statistical area. In the LADAS scallop fleet, vessels rarely, if ever, will switch gears at sea.  So, a trip is most likely to have multiple VTRs if it switches statistical areas.


Other possibilities were considered for our primary dataset:

1.  Observer cover a subset of the fishery. According to the 2021 SBRM report, it was approximately 8-10% of effort for the Limited access fleet. This would provide haul level lat-lon and estimates of catch for the sampled subset. We viewed the subset as too limited - it would provide us with observations of approximately 200 Access area and 100 open area trips per year.Observer data contains the sailing and landing port. 

2. VMS - VMS data would provide lat-lon at a high frequency. Other researchers have used this; however we uncomfortable with figuring out how to allocate catch along the VMS track. VMS data contains the sailing and landing port. 

3. Rasters.  The raster data are an intermediate data product that combines trip report with a statistical model describes the distance between observed hauls and the vtr point location. This allows for a smoothing of effort catch across a non-arbitrary grid (like a 10 minute square, statistical area, or just a lat-lon point).

Further detail about our data can be found [here](data_extraction_and_processing_code.Rmd).

## Some summary statistcs

The filter we are doing is has scallop landings.
```{r summary_statistics,echo=TRUE, eval=TRUE}
# Here are a few summary statistics tables.  Nothing too fancy. This may be sufficient.

summary(final_product_lease)

table(final_product_lease$NSUBTRIP)

table(final_product_lease$YEAR)

table(final_product_lease$GEARCODE)

table(final_product_lease$ftpt)

table(final_product_lease$VTR_STATE)

table(final_product_lease$`Plan Code`)
table(final_product_lease$`Program Code`)

```
The "SES" Plan code corresponds to declaring into the Scallop Fishery (Limited access or General Category).

The Program codes of most interest are probably:

1. SES-SAA - Scallop Access Area
1. SES-SCA - Scallop Days at Sea
1. SES-SCG General Category Scallop

# Methods

1. FishSET
1. Spatial Econometrics
